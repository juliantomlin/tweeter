<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta Information -->
    <title>Tweeter - Home Page</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />

    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,700,700i" rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">

    <!-- App CSS -->
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/nav.css" type="text/css" />
    <link rel="stylesheet" href="/styles/new-tweet.css" type="text/css" />
    <link rel="stylesheet" href="/styles/tweet.css" type="text/css" />


    <!-- External JS -->
    <script type="text/javascript" src="/vendor/jquery-2.2.3.min.js"></script>

    <!-- App JS -->
    <script type="text/javascript" src="/scripts/app.js"></script>
    <script type="text/javascript" src="/scripts/composer-char-counter.js"></script>
    <script>


      $(document).ready(function() {
        $('form').on('submit', function(event){
          event.preventDefault()
          let data = $(this).serialize()
          if (data.length < 146){
            $.ajax({
              url: '/tweets',
              method: 'POST',
              data: data
            }).then(
            (res) => {
              console.log('Success', data, data.length)
              loadTweets()
              $("form")[0].reset()
            },

            (err) => {
              console.log('Error')
              alert('tweet empty')
              })
            }
          else {
            alert('tweet too long')
          }
        })
      })
    </script>
<!--     <script type="text/javascript" src="/scripts/toggle-focus.js"></script>
 -->  </head>

  <body>

    <!-- Top nav bar (fixed) -->
    <nav id="nav-bar">
      <img class="logo" src="/images/bird.png">
      <span class="header">Tweeter</span>
    </nav>

    <!-- Page-specific (main) content here -->
    <main class="container">
      <section class="new-tweet">
        <h2>Compose Tweet</h2>
        <form method="POST" action="/tweets/">
          <textarea name="text" placeholder="What are you humming about?"></textarea>
          <input type="submit" value="Tweet">
          <span class="counter">140</span>
        </form>
      </section>
      <section id='tweets'>
        <article class='tweet'>
        <div class='overlay'>
          <header>
            <div>
              <img class='avatar' src="/images/avatar.png">
              <h3> USER NAME and Avatar </h3>
            </div>
            <h5> @UserName </h5>
          </header>
          <div class='content'>
            <p> This is a tweet!</p>
          </div>
          <footer>
            <h6> 10 days ago</h6>
            <div class='icons'>
              <i class="fas fa-flag"></i>
              <i class="fas fa-retweet"></i>
              <i class="fas fa-heart"></i>
            </div>
          </footer>
        </div>
        </article>
      </section>
    </main>
  </body>
</html>
